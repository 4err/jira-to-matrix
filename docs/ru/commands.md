# Команды в матриксе

Все команды начинаются со знака `!`. Для некоторых команд требуются быть администратором, подробнее в конфиге

## invite

`!invite <алиас комнаты>`

Команда требует статуса администратора.

Приглашает пользователя в указанную комнату, в которой присутствует бот.
Если пользователь вводит имя задачи в Jira, то команда регистронезависима, к примеру в таком случае результат будет успешным и пользователь будет приглашен:

```
!invite test-1
Пользователь <id пользователя> приглашен в комнату <имя комнаты>
```

пользователь будет приглашен в комнату `#TEST-1:matrix.yourdomain`.

При вводе точного алиаса вида `#TEST-1:matrix.yourdomain` команда регистрозависима.

Если комната с алиасом не найдена, то будет отправлено сообщение об ошибке с неверным текстом команды:

```
!invite notExistingRoom

Комната "<notExistingRoom>" не найдена
```

Если пользователь не администратор, то будет отправлено сообщение об отсутствие прав:

```
Пользователь "<id пользователя>" не имеет прав администратора для данного действия
```

## op

`!op <id пользователя(опционально)>`

Команда требует статуса администратора.

Дает пользователю права для действий внутри комнаты, такие как: выкидывать других участников из комнаты, банить, удалять чужие сообщения, редактировать параметры комнаты и т.д.

В случае отсутствия аргументов команда распространяется на её автора:
```
!op
Bot changed the power level of @<id пользователя>:matrix.yourdomain from Default (0) to Moderator (50).
```

Если укзать id другого пользователя, то будет изменен его статус:
```
!op other_user
Bot changed the power level of @<other_user>:matrix.yourdomain from Default (0) to Moderator (50).
```

Но для этого обязательно, чтобы пользователь был в комнате, в противном случае будет сообщение об ошибке:

```
!op not_joined_user
Пользователя not_joined_user нет в этой комнате
```

Если пользователь не администратор, то будет отправлено сообщение об отсутствие прав:

```
Пользователь "<id пользователя>" не имеет прав администратора для данного действия
```

## prio

`!prio <номер или имя нового приоритета(опционально)>`

Повышает приоритет текущей задачи в Jira.

В случае отсутствия аргументов команда выведет доступные статусы приоритетов
```
!prio

Список доступных команд:
1) Highest
2) High
3) Medium
4) Low
5) Lowest
```

Если указать номер приоритета или его имя, то приоритет будет изменен с соответствующим статусом (команда регистронезависимая):

```
!prio 1
Теперь задача имеет приоритет Highest
```
```
!prio hIGHeSt
Теперь задача имеет приоритет Highest
```

Если приоритет задачи неверно указан, то будет соответсвующее сообщение:

```
!prio 123
Новый приоритет с именем "123" не найден
```

## move

`!move <номер или имя нового статуса задачи(опционально)>`

Меняет статус текущей задачи в Jira.

В случае отсутствия аргументов команда выведет доступные статусы задачи
```
!move

Список доступных команд:
1) To Do
2) In Progress
3) Done
```

Если указать номер приоритета или его имя, то статус задачи будет изменен с соответствующим статусом (команда регистронезависимая):

```
!move 1
Статус задачи изменён пользователем <id пользователя> на To Do
```
```
!move TO DO
Статус задачи изменён пользователем <id пользователя> на To Do
```

Если приоритет задачи неверно указан, то будет соответсвующее сообщение:

```
!move 123
Новый статус с именем "123" не найден
```

## comment

`!comment <текст сообщения>`

Добавляет комментарий в задаче в Jira, после этого приходит сообщение из Jira:
```
!comment 123
<id бота> добавил(а) комментарий:
<ФИО пользователя>: 123
```

В случае пустого тела сообщения команда ничего не выполнит в Jira и придет предупреждение:
```
!comment
Добавьте текст комментария
```

## spec

`!spec <часть ФИО пользователя/ id пользователя>`

Добавляет наблюдателя в текущую задачу в Jira и приглашает пользователя в комнату матрикс:

```
!spec Иванов Иван

Наблюдатель добавлен
```

```
!spec ia_ivanov

Наблюдатель добавлен
```

Если найдено несколько человек по похожему имени, будет выведен список с соответствующими id:

```
!spec Иванов
Список пользователей:
Иванов Иван Александрович ia_ivanov
Иванова Анна Михайловна am_ivanova
Иванов Петр Петрович pp_ivanov
```

Если никто не найден, то будет отправлено сообщение:

```
!spec Иввввввванов
Наблюдатель не добавлен! Проверьте имя пользователя и попробуйте еще раз
```

В случае, если бот не добавлен в приватный проект в Jira или его статус не администратор, то будет следующее уведомление:

```
Иванов Иван Александрович ia_ivanov
Неверно установлен статус бота в проекте <ключ проекта со ссылкой>, обратитесь к администратору
```

